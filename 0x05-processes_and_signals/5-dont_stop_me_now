#!/usr/bin/env bash

# A Bash script to stop the 4-to_infinity_and_beyond process.

# Find the PID of the script using process substitution
script_pid=$(ps -ef | grep "4-to_infinity_and_beyond" | grep -v grep | awk '{print $2}')

# Check if the script is running
if [[ -n "$script_pid" ]]; then
  echo "Stopping the 4-to_infinity_and_beyond process with PID $script_pid..."

  # Use kill to send a SIGTERM signal to the script
  kill "$script_pid"

  # Wait for the process to terminate
  sleep 2

  # Check if the process is still running
  if ps -p "$script_pid" > /dev/null; then
    echo "Failed to stop the 4-to_infinity_and_beyond process."
    echo "Sending SIGKILL to force termination..."
    
    # If the process is still running, send SIGKILL to force termination
    kill -9 "$script_pid"

    # Wait for the process to be forcefully terminated
    sleep 2

    # Check again if the process is still running
    if ps -p "$script_pid" > /dev/null; then
      echo "Failed to forcefully stop the 4-to_infinity_and_beyond process."
    else
      echo "Successfully stopped the 4-to_infinity_and_beyond process."
    fi
  else
    echo "Successfully stopped the 4-to_infinity_and_beyond process."
  fi
else
  echo "The 4-to_infinity_and_beyond process is not running."
fi

